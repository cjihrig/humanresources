!function(){"use strict";function e(e){console.log("%c "+e,"color:red")}var t=angular.module("app",["ngRoute","ngResource"]).constant("config",{states:["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"]});t.config(["$routeProvider",function(e){e.when("/",{templateUrl:"home.html"}).when("/employees",{templateUrl:"employees.html",controller:"EmployeesCtrl"}).when("/employees/:employeeId",{templateUrl:"employee.html",controller:"EmployeeCtrl"}).when("/teams",{templateUrl:"teams.html",controller:"TeamsCtrl"}).when("/teams/:teamId",{templateUrl:"team.html",controller:"TeamCtrl"}).otherwise({redirectTo:"/"})}]),t.factory("EmployeeService",["$resource",function(e){return e("/employees/:employeeId",{},{update:{method:"PUT"}})}]),t.factory("TeamService",["$resource",function(e){return e("/teams/:teamId")}]),t.directive("imageFallback",function(){return{link:function(e,t,n){t.bind("error",function(){angular.element(this).attr("src",n.imageFallback)})}}}).directive("editInLine",function(e){function t(t,n,i){var l,o,r,a='<div class="in-line-container">';switch(i.editType){case"select":o=i.displayValue?"displayValue":"value",r=i.editOption,r=r.replace(i.editList,"editList"),a+='<div class="in-line-value" ng-hide="editing">{{'+o+"}}</div>",a+='<select class="in-line-input form-control" ng-show="editing" ng-model="value" ng-options="'+r+'"></select>';break;case"number":a+='<div class="in-line-value" ng-hide="editing">{{value}}</div>',a+='<input class="in-line-input form-control" ng-show="editing" type="number" ng-model="value" step="any" min="0" max="99999" />';break;default:a+='<div class="in-line-value" ng-hide="editing">{{value}}</div>',a+='<input class="in-line-input form-control" ng-show="editing" type="text" ng-model="value" />'}a+="</div>",l=e(a)(t),n.replaceWith(l),t.$on("$destroy",function(){l=void 0,n=void 0})}var n={};return n.scope={value:"=",editing:"=",editList:"=",displayValue:"="},n.restrict="E",n.link=t,n}),t.controller("EmployeesCtrl",["$scope","EmployeeService",function(t,n){n.query(function(e){t.employees=e},e)}]),t.controller("EmployeeCtrl",["$scope","$routeParams","EmployeeService","TeamService","$q","config","$route",function(t,n,i,l,o,r,a){function s(e,t){for(var n=0,i=e.length;i>n;++n){var l=e[n];if(l._id===t)return l}}t.address={},o.all([i.get({employeeId:n.employeeId}).$promise,l.query().$promise]).then(function(e){t.teams=e[1],t.employee=e[0],t.employee.team=s(t.teams,t.employee.team._id)}).catch(e),t.editing=!1,t.states=r.states.slice(0),t.edit=function(){t.editing=!t.editing},t.save=function(){var e=t.employee.address.lines;e.length&&(e=e.filter(function(e){return e})),t.employee.address.lines=e,i.update({employeeId:n.employeeId},t.employee,function(){t.editing=!t.editing})},t.cancel=function(){a.reload()},t.address.addLine=function(e){var n=t.employee.address.lines;n.splice(e+1,0,"")},t.address.removeLine=function(e){var n=t.employee.address.lines;n.splice(e,1)}}]),t.controller("TeamsCtrl",["$scope","TeamService",function(t,n){n.query(function(e){t.teams=e},e)}]),t.controller("TeamCtrl",["$scope","$routeParams","TeamService",function(t,n,i){i.get({teamId:n.teamId},function(e){t.team=e},e)}])}(angular,window);